!function(e){var t=function(e){return e.replace(/^on([A-Z])/,function(e,t){return t.toLowerCase()})},i=function(e,i){e=t(e);var n=e.split(/\s+/),r=this;return n.each(function(e){r.$events[e]=(r.$events[e]||[]).include(i)}),this}.overloadSetter(),n=function(e,i){e=t(e);var n=this.$events[e];if(n)if(i){var r=n.indexOf(i);-1!==r&&delete n[r]}else delete this.$events[e];return this}.overloadSetter(),r="*",o="function",s=new Class({$events:{},$subscribers:{},on:i,off:n,trigger:function(e,i){e=t(e);var n=this.$events[e]||[],o=e in this.$subscribers?this.$subscribers[e]:r in this.$subscribers?this.$subscribers[r]:[],s=this;return n||o?(i=Array.from(i),n.each(function(e){e.apply(s,i)}),o.each(function(t){t.fn?t.fn.apply(t.context,i):t.subscriber.trigger(e,Array.flatten([s,i]))}),this):this},listenTo:function(e,t,i){var n=typeof t,s={context:e,subscriber:this};return n===o?(i=t,t=r):"undefined"===n&&(t=r),i&&(s.fn=i),e.$subscribers[t]=(e.$subscribers[t]||[]).include(s),this},stopListening:function(e,t,i){var n;return Object.each(e.$subscribers,function(r,o){if(n=r.length,"undefined"!=typeof t){if(o===t)for(;n--;)(i&&i===r[n].fn||!i)&&r[n].context===e&&r.splice(n,1)}else for(;n--;)r[n].context===e&&r.splice(n,1)}),this},setOptions:function(){var e,t=this.options=Object.merge.apply(null,[{},this.options].append(arguments));for(e in t)typeOf(t[e])===o&&/^on[A-Z]/.test(e)&&(this.on(e,t[e]),delete t[e]);return this}});"function"==typeof define&&define.amd?define("epitome-events",[],function(){return s}):"undefined"!=typeof module&&module.exports?module.exports=s:(e.Epitome||(e.Epitome={}),e.Epitome.Events=s)}(this),function(e){var t,i=function(e){var t=new e;return t.Events=e,t};"function"==typeof define&&define.amd?define("epitome",["./epitome-events"],i):"undefined"!=typeof module&&module.exports?(require("mootools"),t=i(require("./epitome-events")),t.Model=require("./epitome-model"),t.Collection=require("./epitome-collection"),t.isEqual=require("./epitome-isequal"),t.Template=require("./epitome-template"),module.exports=t):e.Epitome=i(e.Epitome.Events)}(this),function(e){var t=function(){var e=function(t,i,n){if(n=n||[],t===i)return 0!==t||1/t==1/i;if(null==t||null==i)return t===i;var r=typeOf(t),o=typeOf(i);if(r!=o)return!1;switch(r){case"string":return t==String(i);case"number":return t!=+t?i!=+i:0===t?1/t==1/i:t==+i;case"date":case"boolean":return+t==+i;case"regexp":return t.source==i.source&&t.global==i.global&&t.multiline==i.multiline&&t.ignoreCase==i.ignoreCase}if("object"!=typeof t||"object"!=typeof i)return!1;for(var s=n.length;s--;)if(n[s]==t)return!0;n.push(t);var u=0,a=!0;if("array"==r){if(u=t.length,a=u==i.length)for(;u--&&(a=u in t==u in i&&e(t[u],i[u],n)););}else{if("constructor"in t!="constructor"in i||t.constructor!=i.constructor)return!1;for(var c in t)if(t.hasOwnProperty(c)&&(u++,!(a=i.hasOwnProperty(c)&&e(t[c],i[c],n))))break;if(a){for(c in i)if(i.hasOwnProperty(c)&&!u--)break;a=!u}}return n.pop(),a};return e};"function"==typeof define&&define.amd?define("epitome-isequal",["./epitome"],t):"undefined"!=typeof module&&module.exports?(require("mootools"),module.exports=t()):(e.Epitome||(e.Epitome={}),e.Epitome.isEqual=t(e.Epitome))}(this),function(e){var t=function(e,t){return new Class({Implements:[t],_attributes:{},properties:{id:{get:function(){var e=this._attributes.id||String.uniqueID();return this.cid||(this.cid=e),this._attributes.id}}},validators:{},options:{defaults:{}},collections:[],initialize:function(e,t){return t&&t.defaults&&(this.options.defaults=Object.merge(this.options.defaults,t.defaults)),e=e&&"object"===typeOf(e)?e:{},this.set(Object.merge(this.options.defaults,e)),this.setOptions(t),this.trigger("ready")},set:function(){this.propertiesChanged=[],this.validationFailed=[],this._set.apply(this,arguments),this.propertiesChanged.length&&this.trigger("change",this.get(this.propertiesChanged)),this.validationFailed.length&&this.trigger("error",[this.validationFailed])},_set:function(t,i){if(!t||"undefined"==typeof i)return this;if(this.properties[t]&&this.properties[t].set)return this.properties[t].set.call(this,i);if(this._attributes[t]&&e(this._attributes[t],i))return this;var n=this.validate(t,i);if(this.validators[t]&&n!==!0){var r={};return r[t]={key:t,value:i,error:n},this.validationFailed.push(r),this.trigger("error:"+t,r[t]),this}return null===i?delete this._attributes[t]:this._attributes[t]=i,this.trigger("change:"+t,i),this.propertiesChanged.push(t),this}.overloadSetter(),get:function(e){return e&&this.properties[e]&&this.properties[e].get?this.properties[e].get.call(this):e&&"undefined"!=typeof this._attributes[e]?this._attributes[e]:null}.overloadGetter(),unset:function(){var e=Array.prototype.slice.apply(arguments),t={},i=e.length;return i?(Array.each(Array.flatten(e),function(e){t[e]=null}),this.set(t),this):this},toJSON:function(){return Object.clone(this._attributes)},empty:function(){var e=Object.keys(this.toJSON()),t=this;this.trigger("change",[e]),Array.each(e,function(e){t.trigger("change:"+e,null)},this),this._attributes={},this.trigger("empty")},destroy:function(){this._attributes={},this.trigger("destroy")},validate:function(e,t){return e in this.validators?this.validators[e].call(this,t):!0}})};"function"==typeof define&&define.amd?define("epitome-model",["./epitome-isequal","./epitome-events"],t):"undefined"!=typeof module&&module.exports?module.exports=t(require("./epitome-isequal"),require("./epitome-events")):(e.Epitome||(e.Epitome={isEqual:{},Events:{}}),e.Epitome.Model=t(e.Epitome.isEqual,e.Epitome.Events))}(this),function(e){var t=new Class({Extends:Request,options:{secure:!0},initialize:function(e){this.parent(e),Object.append(this.headers,{Accept:"application/json,text/plain;q=0.2,text/html;q=0.1","X-Request":"JSON"})},success:function(e){var t;try{t=this.response.json=JSON.decode(e,this.options.secure)}catch(i){return this.fireEvent("error",[e,i]),void 0}e&&null==t&&204!=this.status?this.onFailure():this.onSuccess(t,e)}}),i=function(e){var i="sync:",n={create:"POST",read:"GET",update:"PUT",delete_:"DELETE"};return new Class({Extends:e,properties:{urlRoot:{set:function(e){this.urlRoot=e,delete this._attributes.urlRoot},get:function(){var e=this.urlRoot||this.options.urlRoot||"no-urlRoot-set";return"/"!==e.charAt(e.length-1)&&(e+="/"),e}}},options:{request:t,emulateREST:!1,useJSON:!1},initialize:function(e,t){this.setOptions(t),this.setupSync(),this.parent(e,this.options)},sync:function(e,t){var i={};return e=e&&n[e]?n[e]:n.read,i.method=e,(e===n.create||e===n.update)&&(i.data=t||this.toJSON(),this.preProcessor&&(i.data=this.preProcessor(i.data))),this.options.useJSON&&["POST","PUT","DELETE"].contains(e)?(i.data=JSON.encode(i.data),i.urlEncoded=!1,this.request.setHeader("Content-type","application/json")):i.urlEncoded=!0,i.url=[this.get("urlRoot"),this.get("id")].join(""),"/"!==i.url.slice(-1)&&(i.url+="/"),this.request.setOptions(i),this.request[e](t),this},setupSync:function(){var e,t=this,r=0,o=function(){r++};return this.getRequestId=function(){return r+1},e={link:"chain",url:this.get("urlRoot"),emulation:this.options.emulateREST,onRequest:o,onCancel:function(){this.removeEvents(i+r)},onSuccess:function(e){e=t.postProcessor&&t.postProcessor(e),t.isNewModel=!1,t.trigger(i+r,[e]),t.trigger("sync",[e,this.options.method,this.options.data])},onFailure:function(){t.trigger(i+"error",[this.options.method,this.options.url,this.options.data]),t.trigger("requestFailure",[this.status,this.response.text])}},this.options.headers&&(e.headers=this.options.headers),this.request=new this.options.request(e),Object.each(n,function(e,i){t[i]=function(e){this.sync(i,e)}}),this},_throwAwaySyncEvent:function(e,t){e=e||i+this.getRequestId();var n=this,r={};return r[e]=function(e){e&&"object"==typeof e&&n.set(e),t&&t.call(n,e),n.off(r)},this.on(r)}.protect(),postProcessor:function(e){return e},preProcessor:function(e){return e},fetch:function(){return this._throwAwaySyncEvent(i+this.getRequestId(),function(){this.isNewModel=!1,this.trigger("fetch")}),this.read(),this},save:function(e,t){var n=["update","create"][+this.isNew()];if(e){var r=typeOf(e),o="object"===r||"string"===r&&"undefined"!=typeof t;o&&this._set.apply(this,arguments)}return this._throwAwaySyncEvent(i+this.getRequestId(),function(){this.trigger("save"),this.trigger(n)}),this[n](),this},destroy:function(){this._throwAwaySyncEvent(i+this.getRequestId(),function(){this._attributes={},this.trigger("destroy")}),this.delete_()},isNew:function(){return"undefined"==typeof this.isNewModel&&(this.isNewModel=!this.get("id")),this.isNewModel}})};"function"==typeof define&&define.amd?define("epitome-model-sync",["./epitome-model"],i):(e.Epitome||(e.Epitome={Model:{}}),e.Epitome.Model.Sync=i(e.Epitome.Model))}(this),function(e){var t=function(){var t=function(){var t=!("object"!=typeof e.localStorage||!e.localStorage.getItem),i="localStorage",n="sessionStorage",r=function(i){var n,r="epitome-"+i,o={},s="model";if(t)try{o=JSON.decode(e[i].getItem(r))||o}catch(u){t=!1}if(!t)try{n=JSON.decode(e.name),n&&"object"==typeof n&&n[r]&&(o=n[r])}catch(u){d()}var a={store:function(e){e=e||this.toJSON(),l([s,this.get("id")].join(":"),e),this.trigger("store",e)},eliminate:function(){return h([s,this.get("id")].join(":")),this.trigger("eliminate")},retrieve:function(){var e=c([s,this.get("id")].join(":"))||null;return this.trigger("retrieve",e),e}},c=function(e){return o[e]||null},l=function(n,s){if(o=t?JSON.decode(e[i].getItem(r))||o:o,o[n]=s,t)try{e[i].setItem(r,JSON.encode(o))}catch(u){}else d();return this},h=function(n){if(delete o[n],t)try{e[i].setItem(r,JSON.encode(o))}catch(s){}else d()},d=function(){var t={},i=JSON.decode(e.name);t[r]=o,e.name=JSON.encode(Object.merge(t,i))};return function(e){return e&&(s=e),new Class(Object.clone(a))}};return{localStorage:r(i),sessionStorage:r(n)}}();return t};"function"==typeof define&&define.amd?define("epitome-storage",["./epitome"],t):(e.Epitome||(e.Epitome={}),e.Epitome.Storage=t(e))}(this),function(e){var t=function(t,i){var n=["forEach","each","invoke","filter","map","some","indexOf","contains","getRandom","getLast"],r=new Class({Implements:[i],model:t,_models:[],initialize:function(e,t){return this.setOptions(t),e&&this.reset(e),this.id=this.options.id||String.uniqueID(),this.trigger("ready")},reset:function(e,t){return e=Array.from(e),Array.each(e,this.addModel.bind(this)),this.on("destroy",this.removeModel.bind(this)),t||this.trigger("reset"),this},addModel:function(e,t){var i;return"object"!==typeOf(e)||instanceOf(e,this.model)||(e=new this.model(e)),e.cid=e.cid||e.get("id")||String.uniqueID(),i=this.getModelByCID(e.cid),i&&t!==!0?this.trigger("add:error",e):(i&&t===!0&&(this._models[this._models.indexOf(e)]=e),this.listenTo(e),this._models.push(e),e.collections.include(this),this.length=this._models.length,this.trigger("add",[e,e.cid]).trigger("reset",[e,e.cid]))},removeModel:function(e,t){var i=this;return e=Array.from(e).slice(),Array.each(e,function(e){e.collections.erase(i),e.collections.length||delete e.fireEvent,Array.erase(i._models,e),i.length=i._models.length,t||i.trigger("remove",[e,e.cid])}),this.trigger("reset",[e])},get:function(e){return this[e]},getModelByCID:function(e){var t=null;return this.some(function(i){return i.cid===e&&(t=i)}),t},getModelById:function(e){var t=null;return this.some(function(i){return i.get("id")===e&&(t=i)}),t},getModel:function(e){return this._models[e]},toJSON:function(){var e=function(e){return e.toJSON()};return Array.map(this._models,e)},empty:function(e){return this.removeModel(this._models,e),this.trigger("empty")},sort:function(e){if(!e)return this._models.sort(),this.trigger("sort");if("function"==typeof e)return this.model.sort(e),this.trigger("sort");var t="asc",i=e.split(","),n=function(e,t){return t>e?-1:e>t?1:0};return this._models.sort(function(e,r){var o=0;return Array.some(i,function(i){i=i.trim();var s=i.split(":"),u=s[0],a=s[1]?s[1]:t,c=e.get(u),l=r.get(u),h=n(c,l),d={asc:h,desc:-h};return"undefined"==typeof d[a]&&(a=t),o=d[a],0!==o}),o}),this.trigger("sort")},reverse:function(){return Array.reverse(this._models),this.trigger("sort")},find:function(t){var i=e.Slick.parse(t),n=[],r=this,o={"=":function(e,t){return e==t},"!=":function(e,t){return e!=t},"^=":function(e,t){return 0===e.indexOf(t)},"*=":function(e,t){return-1!==e.indexOf(t)},"$=":function(e,t){return e.indexOf(t)==e.length-t.length},"*":function(e){return"undefined"!=typeof e}},s=function(e){return e&&o[e]?o[e]:null},u=function(e){var t=e.key,i=e.value||null,n=e.tag||null,o=s(e.operator);r=r.filter(function(e){var r,s;return n&&t?(r=e.get(n),s=r?r[t]:null):s=n?e.get(n):e.get(t),null!==s&&null!==i&&null!==o?o(s,i):null!=s})};if(i.expressions.length){var a,c,l,h,d,f,p,m,g=i.expressions,v=function(e){return e.tag=m,e};e:for(c=0;h=g[c];c++){for(a=0;d=h[a];a++){if(l=d.attributes,f=d.id,f&&(p={key:"id",value:f,operator:"="},l||(l=[]),l.push(p)),m=d.tag,m&&"*"!=m&&(l||(l=[{key:null,value:"",operator:"*"}]),l=Array.map(l,v)),!l)continue e;Array.each(l,u)}n[c]=r,r=this}}return[].combine(Array.flatten(n))},findOne:function(e){var t=this.find(e);return t.length?t[0]:null}});return Array.each(n,function(e){r.implement(e,function(){return Array.prototype[e].apply(this._models,arguments)})}),r};"function"==typeof define&&define.amd?define("epitome-collection",["./epitome-model","./epitome-events"],t):"undefined"!=typeof module&&module.exports?module.exports=t(require("./epitome-model"),require("./epitome-events")):(e.Epitome||(e.Epitome={Model:{},Events:{}}),e.Epitome.Collection=t(e.Epitome.Model,e.Epitome.Events))}(this),function(e){var t=function(e){var t="no-urlRoot-set",i="fetch:";return new Class({Extends:e,options:{urlRoot:t},initialize:function(e,t){this.setupSync(),this.parent(e,t)},setupSync:function(){var e=this,t=0,n=function(){t++};return this.getRequestId=function(){return t+1},this.request=new Request.JSON({link:"chain",url:this.options.urlRoot,emulation:this.options.emulateREST,onRequest:n,onCancel:function(){this.removeEvents(i+t)},onSuccess:function(n){n=e.postProcessor&&e.postProcessor(n),e.trigger(i+t,[[n]])},onFailure:function(){e.trigger(i+"error",[this.options.method,this.options.url,this.options.data])}}),this.request.setHeader("Accept","application/json,text/plain;q=0.2,text/html;q=0.1"),this},fetch:function(e,t){return t||(t={}),this._throwAwayEvent(function(t){e?(this.empty(),Array.each(t,this.addModel.bind(this))):this.processModels(t),this.trigger("fetch",[t])}),this.request.get(t),this},processModels:function(e){var t=this;Array.each(e,function(e){var i=e.id&&t.getModelById(e.id);i?i.set(e):t.addModel(e)})},_throwAwayEvent:function(e){var t=i+this.getRequestId(),n=this,r={};if(e&&"function"==typeof e)return r[t]=function(t){e.apply(n,t),n.off(r)},this.on(r)}.protect(),postProcessor:function(e){return e}})};"function"==typeof define&&define.amd?define("epitome-collection-sync",["./epitome-collection"],t):(e.Epitome||(e.Epitome={Collection:{}}),e.Epitome.Collection.Sync=t(e.Epitome.Collection))}(this),function(e){!function(){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"},t=new RegExp("["+Object.keys(e).join("")+"]","g");String.implement({escape:function(){return String(this).replace(t,function(t){return e[t]})}})}();var t=function(){return new Class({options:{evaluate:/<%([\s\S]+?)%>/g,normal:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g,noMatch:/.^/,escaper:/\\|'|\r|\n|\t|\u2028|\u2029/g},Implements:Options,initialize:function(e){this.setOptions(e);var t=this.escapes={"\\":"\\","'":"'",r:"\r",n:"\n",t:"	",u2028:"\u2028",u2029:"\u2029"};return Object.each(t,function(e,t){this[e]=t},t),this.matcher=new RegExp([(this.options.escape||this.options.noMatch).source,(this.options.normal||this.options.noMatch).source,(this.options.evaluate||this.options.noMatch).source].join("|")+"|$","g"),this},template:function(e,t,i){var n,r=i?Object.merge(this.options,i):this.options,o=this.escapes,s=r.escaper,u=0,a="__p+='";e.replace(this.matcher,function(t,i,n,r,c){return a+=e.slice(u,c).replace(s,function(e){return"\\"+o[e]}),i&&(a+="'+\n((__t=(obj['"+i+"']))==null?'':String.escape(__t))+\n'"),n&&(a+="'+\n((__t=(obj['"+n+"']))==null?'':__t)+\n'"),r&&(a+="';\n"+r+"\n__p+='"),u=c+t.length,t}),a+="';\n",r.variable||(a="obj=obj||{};with(obj){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{n=new Function(r.variable||"obj",a)}catch(c){throw c.source=a,c}if(t)return n(t);var l=function(e){return n.call(this,e)};return l.source="function("+(r.variable||"obj")+"){\n"+a+"}",l}})};"function"==typeof define&&define.amd?define("epitome-template",["./epitome"],t):"undefined"!=typeof module&&module.exports?module.exports=t():(e.Epitome||(e.Epitome={}),e.Epitome.Template=t(e.Epitome))}(this),function(e){var t=function(e,t,i,n){return new Class({Implements:[n],element:null,collection:null,model:null,options:{template:"",events:{}},initialize:function(e){return e&&e.collection&&(this.setCollection(e.collection),delete e.collection),e&&e.model&&(this.setModel(e.model),delete e.model),this.setOptions(e),this.options.element&&(this.setElement(this.options.element,this.options.events),delete this.options.element),this.trigger("ready")},setElement:function(e,t){return this.element&&this.detachEvents()&&this.destroy(),this.element=document.id(e),t&&this.attachEvents(t),this},setCollection:function(e){var t=this,n=function(e){return function(){t.trigger(e+":collection",arguments)}};return instanceOf(e,i)&&(this.collection=e,this.collection.on({change:n("change"),fetch:n("fetch"),add:n("add"),remove:n("remove"),sort:n("sort"),reset:n("reset"),error:n("error")})),this},setModel:function(e){var i=this,n=function(e){return function(){i.trigger(e+":model",arguments)}};return instanceOf(e,t)&&(this.model=e,this.model.on({change:n("change"),destroy:n("destroy"),empty:n("empty"),error:n("error")})),this},attachEvents:function(e){var t=this;return Object.each(e,function(e,i){t.element.addEvent(i,function(){t.trigger(e,arguments)})}),this.element.store("attachedEvents",e),this},detachEvents:function(){var e=this.element.retrieve("attachedEvents");return e&&this.element.removeEvents(e).eliminate("attachedEvents"),this},template:function(t,i){i=i||this.options.template;var n=this.Template||(this.Template=new e);return n.template(i,t)},render:function(){return this.trigger("render")},empty:function(e){return e?this.element.empty():this.element.set("html",""),this.trigger("empty")},dispose:function(){return this.element.dispose(),this.trigger("dispose")},destroy:function(){return this.element.destroy(),this.trigger("destroy")}})};"function"==typeof define&&define.amd?define("epitome-view",["./epitome-template","./epitome-model","./epitome-collection","./epitome-events"],t):(e.Epitome||(e.Epitome={Template:{},Model:{},Collection:{},Events:{}}),e.Epitome.View=t(e.Epitome.Template,e.Epitome.Model,e.Epitome.Collection,e.Epitome.Events))}(this),function(e){var t=function(e){var t,i="hashchange",n="on"+i in window,r=[window,document],o=function(e){for(var t,i={},n=/([^&=]+)=([^&]*)/g;t=n.exec(e);)i[decodeURIComponent(t[1])]=decodeURIComponent(t[2]);return i};return Element.Events.hashchange={onAdd:function(){var e=location.hash,o=function(){e!==location.hash&&(e=location.hash,r.invoke("fireEvent",i,0===e.indexOf("#")?e.substr(1):e))};n&&(window.onhashchange=o)||(t=o.periodical(100))},onRemove:function(){n&&(window.onhashchange=null)||clearInterval(t)}},new Class({Implements:[e],options:{triggerOnLoad:!0},routes:{},boundEvents:{},initialize:function(e){var t=this;this.setOptions(e),this.options.routes&&(this.routes=this.options.routes),window.addEvent(i,function(){var e,i=location.hash,n=i.split("?")[0],r=i.split("?")[1]||"",s=!0;for(e in t.routes){var u=[],a=t.normalize(e,u,!0,!1),c=a.exec(n),l=!1;if(c){s=!1,t.req=c[0];var h=c.slice(1),d={};Array.each(h,function(e,t){"undefined"!=typeof u[t]&&(d[u[t].name]=e)}),t.route=e,t.param=d||{},t.query=r&&o(r),l=t.routes[e],t.trigger("before",l),l&&t.$events[l]?(t.trigger(l+":before"),t.trigger(l,Object.values(t.param))):t.trigger("error",["Route",l,"is undefined"].join(" ")),t.trigger("after",l),l&&t.trigger(l+":after");break}}s&&t.trigger("undefined")}),this.trigger("ready"),this.options.triggerOnLoad&&window.fireEvent(i)},navigate:function(e,t){location.hash===e&&t?window.fireEvent(i):location.hash=e},normalize:function(e,t,i,n){return e instanceof RegExp?e:(e=e.concat(n?"":"/?").replace(/\/\(/g,"(?:/").replace(/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?/g,function(e,i,n,r,o,s){return t.push({name:r,optional:!!s}),i=i||"",[s?"":i,"(?:",s?i:"",(n||"")+(o||n&&"([^/.]+?)"||"([^/]+?)")+")",s||""].join("")}).replace(/([\/.])/g,"\\$1").replace(/\*/g,"(.*)"),new RegExp("^"+e+"$",i?"":"i"))},addRoute:function(e){return e&&e.route&&e.id&&e.events?e.id.length?this.routes[e.route]?this.trigger("error",'Route "{route}" or id "{id}" already exists, aborting'.substitute(e)):(this.routes[e.route]=e.id,this.on(this.boundEvents[e.route]=e.events),this.trigger("route:add",e)):this.trigger("error","Route id cannot be empty, aborting"):this.trigger("error","Please include route, id and events in the argument object when adding a route")},removeRoute:function(e){return e&&this.routes[e]&&this.boundEvents[e]?(this.off(this.boundEvents[e]),delete this.routes[e],delete this.boundEvents[e],this.trigger("route:remove",e)):this.trigger("error","Could not find route or route is not removable")}})};"function"==typeof define&&define.amd?define("epitome-router",["./epitome-events"],t):(e.Epitome||(e.Epitome={Events:{}}),e.Epitome.Router=t(e.Epitome.Events))}(this);